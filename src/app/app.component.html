<div class="flex min-h-screen bg-white">
  <!-- Sidebar -->
  <div class="w-64 border-r bg-white">
    <div class="flex flex-col items-center p-4">
      <img src="assets/images/logo.png" alt="Council of Social Workers Zimbabwe" width="150" height="150"
        class="mb-4" />
    </div>
    <div class="py-2">
      <h2 class="text-sm font-medium text-gray-900 px-4 mb-2">Instructions</h2>
      <div class="space-y-1">

        <div class="p-4 space-y-3">
          <!-- Top section: Icon above Step title -->
          <div class="flex flex-col items-center space-y-2">
            <div class="flex h-8 w-8 items-center justify-center rounded-full bg-orange-100 text-orange-600">
              <!-- Icon -->
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-upload">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" x2="12" y1="3" y2="15" />
              </svg>
            </div>
            <h3 class="text-sm font-semibold text-gray-900">Step 1.</h3>
          </div>
        
          <!-- Instruction text -->
          <p class="text-sm text-center text-gray-700 text-center">
            Upload your latest Tracking Sheet
          </p>
        </div>
        

        <div class="p-4 space-y-3">
          <!-- Top row: Icon & Step title -->
          <div class="flex flex-col items-center space-y-2">
            <div class="flex h-8 w-8 items-center justify-center rounded-full bg-orange-100 text-orange-600">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-images-icon lucide-images">
                <path d="M18 22H4a2 2 0 0 1-2-2V6" />
                <path d="m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18" />
                <circle cx="12" cy="8" r="2" />
                <rect width="16" height="16" x="6" y="2" rx="2" />
              </svg>
            </div>
            <h3 class="text-sm font-semibold text-gray-900">Step 2.</h3>
          </div>

          <!-- Instruction text -->
          <p class="text-sm text-center text-gray-700">
            Click Extract Images to extract them from client emails
          </p>
        </div>


        <div class="p-4 space-y-3">
          <!-- Top row: Icon & Step title -->
          <div class="flex flex-col items-center space-y-2">
            <div class="flex h-8 w-8 items-center justify-center rounded-full bg-orange-100 text-orange-600">
              <!-- Replace with icon -->
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-file-text-icon lucide-file-text">
                <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z" />
                <path d="M14 2v4a2 2 0 0 0 2 2h4" />
                <path d="M10 9H8" />
                <path d="M16 13H8" />
                <path d="M16 17H8" />
              </svg>
            </div>
            <h3 class="text-sm font-semibold text-gray-900">Step 3.</h3>
          </div>

          <!-- Instruction text -->
          <p class="text-sm text-center text-gray-700">
            Click Generate CardPro Sheet & verify the details
          </p>
        </div>


        <div class="p-4 space-y-3">
          <!-- Top row: Icon & Step title -->
          <div class="flex flex-col items-center space-y-2">
            <div class="flex h-8 w-8 items-center justify-center rounded-full bg-orange-100 text-orange-600">
              <!-- Replace with icon -->
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-download-icon lucide-download">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="7 10 12 15 17 10" />
                <line x1="12" x2="12" y1="15" y2="3" />
              </svg>
            </div>
            <h3 class="text-sm font-semibold text-gray-900">Step 4.</h3>
          </div>

          <!-- Instruction text -->
          <p class="text-sm text-center text-gray-700">
            Click Download Files to get your zipped Batch file
          </p>
        </div>

      </div>
    </div>
  </div>

  <!-- Right Section: Header + Main -->
  <div class="flex flex-col flex-1">

    <!-- Header Menu -->
    <header class="flex items-center justify-between border-b px-4 sm:px-6 py-3 bg-white">
      <nav class="flex-1 mx-4 px-6 sm:mx-8">
        <ul class="flex justify-end space-x-8 text-sm text-gray-600">
    
          <!-- CardPro (Active) -->
          <li>
            <a
              routerLink=""
              routerLinkActive="text-black font-medium border-b-2 border-black"
              [routerLinkActiveOptions]="{ exact: true }"
              class="flex items-center gap-1 text-sm hover:text-black transition pb-1"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-house">
                <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8" />
                <path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
              </svg>
              CardPro
            </a>
          </li>
    
          <!-- Renewals -->
          <li>
            <a
              routerLink="/renewals"
              routerLinkActive="text-black font-medium border-b-2 border-black"
              class="flex items-center gap-2 hover:text-black transition pb-1"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-clipboard-plus">
                <rect width="8" height="4" x="8" y="2" rx="1" ry="1" />
                <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2" />
                <path d="M9 14h6" />
                <path d="M12 17v-6" />
              </svg>
              Renewals
            </a>
          </li>
    
          <!-- Transaction History -->
          <li>
            <a
              routerLink="/transactions"
              routerLinkActive="text-black font-medium border-b-2 border-black"
              class="flex items-center gap-2 hover:text-black transition pb-1"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                class="lucide lucide-folder-clock">
                <circle cx="16" cy="16" r="6" />
                <path d="M7 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2" />
                <path d="M16 14v2l1 1" />
              </svg>
              Transactions History
            </a>
          </li>
    
        </ul>
      </nav>
    </header>
    

    <!-- Main Content -->
    <main class="flex-1 mt-3 px-4 sm:px-6">
      <router-outlet></router-outlet>
    </main>

  </div>

</div>

<!-- Modal for OAuth token -->
<div *ngIf="isOAuthTokenCheckModalOpen"
  class="fixed inset-0 z-50 flex items-center justify-center bg-gray-800 bg-opacity-50">
  <div class="bg-white rounded-2xl shadow-xl w-full max-w-md">

    <!-- Modal Header -->
    <div class="flex items-center justify-between p-5 border-b">
      <h5 class="text-lg font-semibold text-gray-800">Checking Email Access Permissions</h5>
      <button type="button" class="text-gray-400 hover:text-gray-600" (click)="closeModal()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 24 24"
          class="text-gray-600">
          <path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
      </button>
    </div>

    <!-- Modal Body -->
    <div class="p-5 space-y-4">
      <div *ngIf="redirectURL == ''">
        <p class="text-gray-700 text-sm">
          Checking if the app has permission to access the identification mailbox...
        </p>
      </div>

      <div *ngIf="redirectURL != ''" class="space-y-2">
        <p class="text-gray-700 text-sm">
          Please click the link below to allow the app access to the mailbox & sheets:
        </p>
        <div class="bg-gray-100 p-3 rounded-md text-xs text-blue-700 break-words max-h-40 overflow-auto">
          <a [href]="redirectURL" target="_blank" rel="noopener noreferrer" class="hover:underline break-words">
            {{ redirectURL }}
          </a>
        </div>
        <p class="text-gray-500 text-xs">
          You can close this dialog once done.
        </p>
      </div>
    </div>

    <!-- Modal Footer -->
    <div class="flex justify-end p-5 border-t" *ngIf="redirectURL != ''">
      <button type="button" class="px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-500"
        (click)="closeModal()">
        Close
      </button>
    </div>

  </div>
</div>